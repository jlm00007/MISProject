@page
@model MISProject.Pages.CatchersModel
@{
    var position = HttpContext.Request.Query["position"];
}
<body>
    <h1>Catchers</h1>
    <h2 style="color:black" id="names" style="visibility: hidden;"></h2>
    <div style="color:black" id="numbers" style="visibility: hidden;"></div>
    <div style="color:black" id="positions" style="visibility: hidden;"></div>
    <script>
        // Define the displayPlayerPos function
        async function displayPlayerPos(position) {
            const response = await fetch(`https://localhost:7270/api/Player/position/${position}`);
            const data = await response.json();
            const namesElement = document.getElementById('names');
            const numbersElement = document.getElementById('numbers');
            const positionsElement = document.getElementById('positions');
            // Clear previous data
            namesElement.innerHTML = '';
            numbersElement.innerHTML = '';
            positionsElement.innerHTML = '';
            data.forEach(player => {
                // Create new elements for each player
                const nameElement = document.createElement('div');
                nameElement.innerHTML = player.name;
                namesElement.appendChild(nameElement);
                const numberElement = document.createElement('div');
                numberElement.innerHTML = player.number;
                numbersElement.appendChild(numberElement);
                const positionElement = document.createElement('div');
                positionElement.innerHTML = player.position;
                positionsElement.appendChild(positionElement);
            });
            // Make elements visible
            namesElement.style.visibility = 'visible';
            numbersElement.style.visibility = 'visible';
            positionsElement.style.visibility = 'visible';
        }
        // Call the function with the position parameter
        displayPlayerPos("@position");
    </script>

</body>